{"version":3,"file":"sandbox-init.js","sources":["../../../src/sandbox/browser/sandbox-init.ts"],"sourcesContent":["type SandboxInitEvent = MessageEvent<{\n    action: 'rempl-sandbox-init-scripts';\n    scripts: Record<string, string>;\n}>;\n\nexport function initSandboxScript() {\n    addEventListener('message', function handleMessage(event: SandboxInitEvent) {\n        const { action, scripts } = event.data || {};\n\n        if (action === 'rempl-sandbox-init-scripts' && scripts) {\n            // handle message only once\n            removeEventListener('message', handleMessage);\n\n            // evaluate scripts\n            for (const [sourceURL, source] of Object.entries(scripts)) {\n                // indirect eval, see detail: https://esbuild.github.io/content-types/#direct-eval\n                Function(`${source}\\n//# sourceURL=${sourceURL}`)();\n            }\n        }\n    });\n}\n"],"names":[],"mappings":"AAKA,SAAA,iBAAA,GAAA;AACA,IAAA,gBAAA,CAAA,SAAA,EAAA,SAAA,aAAA,CAAA,KAAA,EAAA;AACA,QAAA,MAAA,EAAA,MAAA,EAAA,OAAA,EAAA,GAAA,KAAA,CAAA,IAAA,IAAA,EAAA,CAAA;AACA;AACA,QAAA,IAAA,MAAA,KAAA,4BAAA,IAAA,OAAA,EAAA;AACA;AACA,YAAA,mBAAA,CAAA,SAAA,EAAA,aAAA,CAAA,CAAA;AACA;AACA;AACA,YAAA,KAAA,MAAA,CAAA,SAAA,EAAA,MAAA,CAAA,IAAA,MAAA,CAAA,OAAA,CAAA,OAAA,CAAA,EAAA;AACA;AACA,gBAAA,QAAA,CAAA,CAAA,EAAA,MAAA,CAAA,gBAAA,EAAA,SAAA,CAAA,CAAA,CAAA,EAAA,CAAA;AACA,aAAA;AACA,SAAA;AACA,KAAA,CAAA,CAAA;AACA;;;;"}