{"version":3,"file":"index.js","sources":["../../../src/env/browser/index.ts"],"sourcesContent":["/* eslint-env browser */\nimport { globalThis, parent } from '../../utils/global.js';\nimport { EventTransport } from '../../transport/event.js';\nimport { Publisher } from '../../classes/Publisher.js';\nimport { Subscriber } from '../../classes/Subscriber.js';\n\nconst subscribers = new Map<string, Subscriber>();\n\nclass EnvPublisher extends Publisher {\n    linkWindow(target: Window | typeof globalThis) {\n        EventTransport.get('rempl-env-publisher', 'rempl-env-subscriber', target).sync(this);\n    }\n}\n\nexport function getEnv(id: string): Subscriber {\n    let subscriber = subscribers.get(id);\n\n    if (!subscriber) {\n        subscribers.set(id, (subscriber = new Subscriber(id)));\n        EventTransport.get('rempl-env-subscriber', 'rempl-env-publisher', parent).sync(subscriber);\n    }\n\n    return subscriber;\n}\n\nexport function createEnv(id?: string) {\n    return new EnvPublisher(id);\n}\n"],"names":["parent"],"mappings":";;;;;AAAA;AAKA;AACA,MAAA,WAAA,GAAA,IAAA,GAAA,EAAA,CAAA;AACA;AACA,MAAA,YAAA,SAAA,SAAA,CAAA;AACA,IAAA,UAAA,CAAA,MAAA,EAAA;AACA,QAAA,cAAA,CAAA,GAAA,CAAA,qBAAA,EAAA,sBAAA,EAAA,MAAA,CAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA;AACA,KAAA;AACA,CAAA;AACA;AACA,SAAA,MAAA,CAAA,EAAA,EAAA;AACA,IAAA,IAAA,UAAA,GAAA,WAAA,CAAA,GAAA,CAAA,EAAA,CAAA,CAAA;AACA;AACA,IAAA,IAAA,CAAA,UAAA,EAAA;AACA,QAAA,WAAA,CAAA,GAAA,CAAA,EAAA,GAAA,UAAA,GAAA,IAAA,UAAA,CAAA,EAAA,CAAA,EAAA,CAAA;AACA,QAAA,cAAA,CAAA,GAAA,CAAA,sBAAA,EAAA,qBAAA,EAAAA,cAAA,CAAA,CAAA,IAAA,CAAA,UAAA,CAAA,CAAA;AACA,KAAA;AACA;AACA,IAAA,OAAA,UAAA,CAAA;AACA,CAAA;AACA;AACA,SAAA,SAAA,CAAA,EAAA,EAAA;AACA,IAAA,OAAA,IAAA,YAAA,CAAA,EAAA,CAAA,CAAA;AACA;;;;"}