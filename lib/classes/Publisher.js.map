{"version":3,"file":"Publisher.js","sources":["../../src/classes/Publisher.ts"],"sourcesContent":["import { Namespace } from './Namespace.js';\nimport { Endpoint } from './Endpoint.js';\nimport { SubscriberPacket } from './Subscriber.js';\n\nexport type PipeFn = (...args: unknown[]) => unknown;\n\nexport class PublisherNamespace extends Namespace {\n    _lastData: unknown = null;\n    publish: (payload: unknown) => void;\n\n    constructor(name: string, owner: Publisher) {\n        super(name, owner);\n\n        this.provide('init', () => this._lastData);\n        this.publish = (payload: unknown) => {\n            this._lastData = payload;\n            owner.send<SubscriberPacket>({\n                type: 'data',\n                ns: this.name,\n                payload,\n            });\n        };\n    }\n}\n\nexport class Publisher extends Endpoint<PublisherNamespace> {\n    type = 'Publisher';\n    get namespaceClass() {\n        return PublisherNamespace;\n    }\n}\n"],"names":[],"mappings":";;;AAMA,MAAA,kBAAA,SAAA,SAAA,CAAA;AACA,IAAA,SAAA,GAAA,IAAA,CAAA;AACA,IAAA,OAAA,CAAA;AACA;AACA,IAAA,WAAA,CAAA,IAAA,EAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,EAAA,KAAA,CAAA,CAAA;AACA;AACA,QAAA,IAAA,CAAA,OAAA,CAAA,MAAA,EAAA,MAAA,IAAA,CAAA,SAAA,CAAA,CAAA;AACA,QAAA,IAAA,CAAA,OAAA,GAAA,CAAA,OAAA,KAAA;AACA,YAAA,IAAA,CAAA,SAAA,GAAA,OAAA,CAAA;AACA,YAAA,KAAA,CAAA,IAAA,CAAA;AACA,gBAAA,IAAA,EAAA,MAAA;AACA,gBAAA,EAAA,EAAA,IAAA,CAAA,IAAA;AACA,gBAAA,OAAA;AACA,aAAA,CAAA,CAAA;AACA,SAAA,CAAA;AACA,KAAA;AACA,CAAA;AACA;AACA,MAAA,SAAA,SAAA,QAAA,CAAA;AACA,IAAA,IAAA,GAAA,WAAA,CAAA;AACA,IAAA,IAAA,cAAA,GAAA;AACA,QAAA,OAAA,kBAAA,CAAA;AACA,KAAA;AACA;;;;"}