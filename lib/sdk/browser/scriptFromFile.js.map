{"version":3,"file":"scriptFromFile.js","sources":["../../../src/sdk/browser/scriptFromFile.ts"],"sourcesContent":["/* eslint-env browser */\n\nimport { GetRemoteUIHandler, GetRemoteUISettings } from '../../types.js';\n\ndeclare const rempl: () => void;\n\nexport function scriptFromFile(filename: string, includeRempl = false): GetRemoteUIHandler {\n    let cache: string | null = null;\n\n    // TODO: take in account settings.accept setting\n    return function (settings: GetRemoteUISettings) {\n        if (!settings.dev && cache !== null) {\n            return { type: 'script', value: cache };\n        }\n\n        return fetch(filename)\n            .then((response) => {\n                if (!response.ok) {\n                    throw new Error(`HTTP error! File \"${filename}\", status: ${response.status}`);\n                }\n\n                return response.text();\n            })\n            .then((response) => ({\n                type: 'script',\n                value: (cache =\n                    (includeRempl && typeof rempl === 'function'\n                        ? 'var rempl = (' + rempl.toString() + ')();'\n                        : '') + response),\n            }));\n    };\n}\n"],"names":[],"mappings":"AAMA,SAAA,cAAA,CAAA,QAAA,EAAA,YAAA,GAAA,KAAA,EAAA;AACA,IAAA,IAAA,KAAA,GAAA,IAAA,CAAA;AACA;AACA;AACA,IAAA,OAAA,UAAA,QAAA,EAAA;AACA,QAAA,IAAA,CAAA,QAAA,CAAA,GAAA,IAAA,KAAA,KAAA,IAAA,EAAA;AACA,YAAA,OAAA,EAAA,IAAA,EAAA,QAAA,EAAA,KAAA,EAAA,KAAA,EAAA,CAAA;AACA,SAAA;AACA;AACA,QAAA,OAAA,KAAA,CAAA,QAAA,CAAA;AACA,aAAA,IAAA,CAAA,CAAA,QAAA,KAAA;AACA,gBAAA,IAAA,CAAA,QAAA,CAAA,EAAA,EAAA;AACA,oBAAA,MAAA,IAAA,KAAA,CAAA,CAAA,kBAAA,EAAA,QAAA,CAAA,WAAA,EAAA,QAAA,CAAA,MAAA,CAAA,CAAA,CAAA,CAAA;AACA,iBAAA;AACA;AACA,gBAAA,OAAA,QAAA,CAAA,IAAA,EAAA,CAAA;AACA,aAAA,CAAA;AACA,aAAA,IAAA,CAAA,CAAA,QAAA,MAAA;AACA,gBAAA,IAAA,EAAA,QAAA;AACA,gBAAA,KAAA,GAAA,KAAA;AACA,oBAAA,CAAA,YAAA,IAAA,OAAA,KAAA,KAAA,UAAA;AACA,0BAAA,eAAA,GAAA,KAAA,CAAA,QAAA,EAAA,GAAA,MAAA;AACA,0BAAA,EAAA,IAAA,QAAA,CAAA;AACA,aAAA,CAAA,CAAA,CAAA;AACA,KAAA,CAAA;AACA;;;;"}