{"version":3,"file":"scriptFromFile.js","sources":["../../src/sdk/scriptFromFile.ts"],"sourcesContent":["import * as fs from 'fs';\nimport * as path from 'path';\nimport { fileURLToPath } from 'url';\nimport { GetRemoteUIHandler } from '../types.js';\n\nexport function scriptFromFile(filename: string, includeRempl = false): GetRemoteUIHandler {\n    const remplPath = path.join(\n        path.dirname(fileURLToPath(import.meta.url)),\n        '../../dist/rempl.js'\n    );\n    let cache: string | null = null;\n\n    // TODO: take in account settings.accept setting\n    return function (settings) {\n        if (!settings.dev && cache !== null) {\n            return { type: 'script', value: cache };\n        }\n\n        return fs.promises.readFile(filename, 'utf-8').then((content) => {\n            return {\n                type: 'script',\n                value: (cache = (includeRempl ? fs.readFileSync(remplPath, 'utf8') : '') + content),\n            };\n        });\n    };\n}\n"],"names":[],"mappings":";;;;AAKA,SAAA,cAAA,CAAA,QAAA,EAAA,YAAA,GAAA,KAAA,EAAA;AACA,IAAA,MAAA,SAAA,GAAA,IAAA,CAAA,IAAA;AACA,QAAA,IAAA,CAAA,OAAA,CAAA,aAAA,CAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,CAAA;AACA,QAAA,qBAAA;AACA,KAAA,CAAA;AACA,IAAA,IAAA,KAAA,GAAA,IAAA,CAAA;AACA;AACA;AACA,IAAA,OAAA,UAAA,QAAA,EAAA;AACA,QAAA,IAAA,CAAA,QAAA,CAAA,GAAA,IAAA,KAAA,KAAA,IAAA,EAAA;AACA,YAAA,OAAA,EAAA,IAAA,EAAA,QAAA,EAAA,KAAA,EAAA,KAAA,EAAA,CAAA;AACA,SAAA;AACA;AACA,QAAA,OAAA,EAAA,CAAA,QAAA,CAAA,QAAA,CAAA,QAAA,EAAA,OAAA,CAAA,CAAA,IAAA,CAAA,CAAA,OAAA,KAAA;AACA,YAAA,OAAA;AACA,gBAAA,IAAA,EAAA,QAAA;AACA,gBAAA,KAAA,GAAA,KAAA,GAAA,CAAA,YAAA,GAAA,EAAA,CAAA,YAAA,CAAA,SAAA,EAAA,MAAA,CAAA,GAAA,EAAA,IAAA,OAAA,CAAA;AACA,aAAA,CAAA;AACA,SAAA,CAAA,CAAA;AACA,KAAA,CAAA;AACA;;;;"}