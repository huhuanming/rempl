{"version":3,"file":"index.js","sources":["../../../src/publisher/browser/index.ts"],"sourcesContent":["import { GetRemoteUIHandler, PublisherOptions } from '../../types.js';\nimport { EventTransport } from '../../transport/event.js';\nimport { getPublisher, connect } from '../factory.js';\nimport { createBrowserWsTransport, fetchWsSettings } from './transport-ws.js';\n\nexport function createPublisher(\n    id: string,\n    getRemoteUI: GetRemoteUIHandler,\n    options?: PublisherOptions\n) {\n    connect(true, createBrowserWsTransport, fetchWsSettings);\n\n    const publisher = getPublisher(id, getRemoteUI, options);\n\n    // browser extension\n    // EventTransport.get('rempl-browser-extension-publisher', 'rempl-browser-extension-host').sync(\n    //     publisher\n    // );\n\n    // in page\n    // EventTransport.get('rempl-inpage-publisher', 'rempl-inpage-host').sync(publisher);\n\n    // self subscriber\n    EventTransport.get('rempl-self-publisher', 'rempl-self-subscriber').sync(publisher);\n\n    return Object.assign(publisher.ns('*'), {\n        ns: publisher.ns.bind(publisher),\n    });\n}\n\nexport function connectPublisherWs(uri?: string) {\n    connect(false, createBrowserWsTransport, fetchWsSettings, uri);\n}\n"],"names":[],"mappings":";;;;AAKA,SAAA,eAAA;AACA,IAAA,EAAA;AACA,IAAA,WAAA;AACA,IAAA,OAAA;AACA,EAAA;AACA,IAAA,OAAA,CAAA,IAAA,EAAA,wBAAA,EAAA,eAAA,CAAA,CAAA;AACA;AACA,IAAA,MAAA,SAAA,GAAA,YAAA,CAAA,EAAA,EAAA,WAAA,EAAA,OAAA,CAAA,CAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAA,cAAA,CAAA,GAAA,CAAA,sBAAA,EAAA,uBAAA,CAAA,CAAA,IAAA,CAAA,SAAA,CAAA,CAAA;AACA;AACA,IAAA,OAAA,MAAA,CAAA,MAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,CAAA,EAAA;AACA,QAAA,EAAA,EAAA,SAAA,CAAA,EAAA,CAAA,IAAA,CAAA,SAAA,CAAA;AACA,KAAA,CAAA,CAAA;AACA,CAAA;AACA;AACA,SAAA,kBAAA,CAAA,GAAA,EAAA;AACA,IAAA,OAAA,CAAA,KAAA,EAAA,wBAAA,EAAA,eAAA,EAAA,GAAA,CAAA,CAAA;AACA;;;;"}