{"version":3,"file":"TransportPublisher.js","sources":["../../src/publisher/TransportPublisher.ts"],"sourcesContent":["import { Publisher } from '../classes/Publisher.js';\nimport {\n    GetRemoteUIHandler,\n    PublisherOptions,\n    GetRemoteUIInternalResult,\n    GetRemoteUISettings,\n} from '../types.js';\n\nexport class TransportPublisher extends Publisher {\n    getRemoteUI: (settings: GetRemoteUISettings) => Promise<GetRemoteUIInternalResult>;\n    options: PublisherOptions;\n\n    constructor(id: string, getRemoteUI: GetRemoteUIHandler, options?: PublisherOptions) {\n        super(id);\n\n        this.options = options || {};\n        this.getRemoteUI = (settings) => {\n            try {\n                return Promise.resolve(getRemoteUI(settings)).then((result) => {\n                    if (result.type === 'script') {\n                        // TODO: value should be a string\n                        return {\n                            type: 'script',\n                            value: {\n                                'publisher-ui.js': result.value,\n                            },\n                        };\n                    }\n\n                    return result;\n                });\n            } catch (e: any) {\n                return Promise.reject(e);\n            }\n        };\n    }\n}\n"],"names":[],"mappings":";;AAQA,MAAA,kBAAA,SAAA,SAAA,CAAA;AACA,IAAA,WAAA,CAAA;AACA,IAAA,OAAA,CAAA;AACA;AACA,IAAA,WAAA,CAAA,EAAA,EAAA,WAAA,EAAA,OAAA,EAAA;AACA,QAAA,KAAA,CAAA,EAAA,CAAA,CAAA;AACA;AACA,QAAA,IAAA,CAAA,OAAA,GAAA,OAAA,IAAA,EAAA,CAAA;AACA,QAAA,IAAA,CAAA,WAAA,GAAA,CAAA,QAAA,KAAA;AACA,YAAA,IAAA;AACA,gBAAA,OAAA,OAAA,CAAA,OAAA,CAAA,WAAA,CAAA,QAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,MAAA,KAAA;AACA,oBAAA,IAAA,MAAA,CAAA,IAAA,KAAA,QAAA,EAAA;AACA;AACA,wBAAA,OAAA;AACA,4BAAA,IAAA,EAAA,QAAA;AACA,4BAAA,KAAA,EAAA;AACA,gCAAA,iBAAA,EAAA,MAAA,CAAA,KAAA;AACA,6BAAA;AACA,yBAAA,CAAA;AACA,qBAAA;AACA;AACA,oBAAA,OAAA,MAAA,CAAA;AACA,iBAAA,CAAA,CAAA;AACA,aAAA,CAAA,OAAA,CAAA,EAAA;AACA,gBAAA,OAAA,OAAA,CAAA,MAAA,CAAA,CAAA,CAAA,CAAA;AACA,aAAA;AACA,SAAA,CAAA;AACA,KAAA;AACA;;;;"}